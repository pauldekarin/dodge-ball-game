[gd_scene load_steps=44 format=3 uid="uid://b1vcolsfhq8ul"]

[ext_resource type="Texture2D" uid="uid://crjs6lxmnwqko" path="res://assets/characters/player.png" id="1_hstjl"]
[ext_resource type="Script" path="res://assets/scripts/Camera3D.cs" id="1_whyca"]
[ext_resource type="Shader" path="res://assets/shaders/outline.gdshader" id="2_sr132"]
[ext_resource type="ArrayMesh" uid="uid://b1nis3bm8qij7" path="res://assets/characters/player.obj" id="2_wp22y"]
[ext_resource type="Script" path="res://assets/scripts/Rocket.cs" id="4_44uwe"]
[ext_resource type="ArrayMesh" uid="uid://cdr3c03jkrhvg" path="res://models/Toy_Rocket.obj" id="6_7fv1l"]
[ext_resource type="Script" path="res://assets/scripts/Explosion.cs" id="8_6o8lh"]
[ext_resource type="Texture2D" uid="uid://d116ixx7q17p7" path="res://materials/explosion_surve.tres" id="8_dl0l2"]
[ext_resource type="Shader" path="res://assets/shaders/post_processing.gdshader" id="8_vo8th"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_54d4d"]
use_debanding = false

[sub_resource type="Sky" id="Sky_0f058"]
sky_material = SubResource("ProceduralSkyMaterial_54d4d")
process_mode = 3

[sub_resource type="Environment" id="Environment_v8qyh"]
background_mode = 2
sky = SubResource("Sky_0f058")
sky_custom_fov = 114.0
ambient_light_source = 3
ambient_light_color = Color(0.866667, 0, 0.776471, 1)
tonemap_mode = 3
tonemap_exposure = 1.25
tonemap_white = 0.83
ssr_enabled = true
ssr_fade_in = 202.677
ssr_fade_out = 9.18959
glow_enabled = true
glow_normalized = true
glow_intensity = 0.97
glow_strength = 0.99
glow_bloom = 0.19
glow_blend_mode = 1
glow_hdr_scale = 1.66
glow_hdr_luminance_cap = 187.16
glow_map_strength = 0.48

[sub_resource type="CylinderShape3D" id="CylinderShape3D_yojg5"]
height = 3.72669
radius = 1.55673

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_w2jwh"]
albedo_texture = ExtResource("1_hstjl")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xw123"]
render_priority = 1
shader = ExtResource("2_sr132")
shader_parameter/shadow_color = Color(0.85098, 0.803922, 0.396078, 1)
shader_parameter/shadow_thickness = 2.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_43kb8"]
shading_mode = 2
albedo_color = Color(1, 0.52549, 0.498039, 1)
metallic = 1.0
metallic_specular = 0.0
roughness = 0.0
heightmap_scale = -16.0
refraction_scale = -1.0
grow = true
grow_amount = -0.15

[sub_resource type="BoxShape3D" id="BoxShape3D_lpa56"]
size = Vector3(1, 3.11301, 1.6377)

[sub_resource type="Gradient" id="Gradient_bxyyq"]
offsets = PackedFloat32Array(0, 0.145455, 0.410256, 1)
colors = PackedColorArray(1, 1, 1, 1, 0.914939, 0, 0.0638677, 1, 0.878172, 0.692256, 0, 1, 0.809865, 0.53706, 2.04974e-07, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_7lt48"]
gradient = SubResource("Gradient_bxyyq")

[sub_resource type="Curve" id="Curve_hiyb4"]
max_value = 29.21
_data = [Vector2(0.0431655, 15.306), 0.0, 0.0, 0, 0, Vector2(0.136691, 14.9555), 0.0, 0.0, 0, 0, Vector2(0.938849, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_xmf3i"]
curve = SubResource("Curve_hiyb4")

[sub_resource type="Curve" id="Curve_o143u"]
max_value = 1.5
_data = [Vector2(0, 0.63), 0.0, 0.0, 0, 0, Vector2(0.402878, 0.636), 0.0, 0.0, 0, 0, Vector2(0.971223, 0.156), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_eblmv"]
curve = SubResource("Curve_o143u")

[sub_resource type="Curve" id="Curve_m7ugd"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_v8npd"]
curve = SubResource("Curve_m7ugd")

[sub_resource type="Curve" id="Curve_msmic"]
min_value = 2.13163e-14
max_value = 205.8
_data = [Vector2(0.705036, 205.8), 0.0, 214.933, 0, 0, Vector2(0.99999, 2.13163e-14), 0.0, 0.0, 0, 0, Vector2(1, -165.118), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_smo45"]
curve = SubResource("Curve_msmic")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_bqfjj"]
emission_shape = 1
emission_sphere_radius = 4.64
angle_min = -119.1
angle_max = 885.9
inherit_velocity_ratio = 1.0
direction = Vector3(2.08165e-12, 2.08165e-12, -1)
spread = 22.771
flatness = 1.0
initial_velocity_max = 262.24
radial_velocity_max = 48.89
velocity_limit_curve = SubResource("CurveTexture_smo45")
gravity = Vector3(2.08165e-12, 2.08165e-12, -9)
scale_max = 13.05
scale_curve = SubResource("CurveTexture_eblmv")
color = Color(0.847059, 0.552941, 0.109804, 1)
color_initial_ramp = SubResource("GradientTexture1D_7lt48")
emission_curve = SubResource("CurveTexture_xmf3i")
turbulence_noise_strength = 20.0
turbulence_noise_scale = 10.0
turbulence_noise_speed = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)
turbulence_noise_speed_random = 0.0
turbulence_influence_min = 0.0
turbulence_influence_max = 0.24
turbulence_influence_over_life = SubResource("CurveTexture_v8npd")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f1owv"]
vertex_color_use_as_albedo = true

[sub_resource type="BoxMesh" id="BoxMesh_5ovii"]
material = SubResource("StandardMaterial3D_f1owv")

[sub_resource type="QuadMesh" id="QuadMesh_1sw3d"]
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1qs0j"]
render_priority = 0
shader = ExtResource("8_vo8th")

[sub_resource type="Curve" id="Curve_p6fbn"]
min_value = -360.0
max_value = 360.0
_data = [Vector2(0, 360), 0.0, 0.0, 0, 0, Vector2(0.992806, -360), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_frkkx"]
curve = SubResource("Curve_p6fbn")

[sub_resource type="Gradient" id="Gradient_58sos"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.108059, 0.181319, 0.998168)
colors = PackedColorArray(1, 1, 1, 1, 0.647059, 0, 0, 1, 0.997892, 0.49605, 0.428528, 1, 1, 0.38834, 0.191151, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_gonr0"]
gradient = SubResource("Gradient_58sos")

[sub_resource type="Curve" id="Curve_t5lcq"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.992806, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_mqvg5"]
curve = SubResource("Curve_t5lcq")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_tr8k3"]
lifetime_randomness = 1.0
particle_flag_align_y = true
particle_flag_rotate_y = true
emission_shape = 1
emission_sphere_radius = 2.0
angle_curve = SubResource("CurveTexture_frkkx")
spread = 180.0
initial_velocity_min = 102.41
initial_velocity_max = 102.41
gravity = Vector3(0, -10, 0)
scale_min = 0.5
scale_max = 0.5
scale_curve = SubResource("CurveTexture_mqvg5")
color = Color(1, 0.52549, 0.278431, 1)
color_initial_ramp = SubResource("GradientTexture1D_gonr0")
emission_curve = ExtResource("8_dl0l2")
turbulence_noise_strength = 0.29
turbulence_noise_scale = 0.238
collision_mode = 1
collision_friction = 0.3
collision_bounce = 0.5
collision_use_scale = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lbqfn"]
vertex_color_use_as_albedo = true

[sub_resource type="BoxMesh" id="BoxMesh_vefb4"]
material = SubResource("StandardMaterial3D_lbqfn")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_1bmth"]
emission_shape = 1
emission_sphere_radius = 1.0
direction = Vector3(0, 0, 0)
spread = 0.0
scale_min = 0.47
scale_max = 0.57
collision_mode = 1
collision_friction = 0.0
collision_bounce = 0.0

[sub_resource type="BoxMesh" id="BoxMesh_ju2jw"]

[node name="Scene" type="Node3D"]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1.39071e-07, 3.48787e-16, 1, 3.48787e-16, 1, -3.48787e-16, -1, 3.48787e-16, 1.39071e-07, 81.577, 0.469, -2.372)
fov = 18.0
script = ExtResource("1_whyca")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_v8qyh")

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(-1, 0.000316123, 0.000165024, 0.000316101, 1, -0.000326058, -0.000165149, -0.000325996, -1, 6.08099, 0.977182, -4.38054)
safe_margin = 1.331

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1, -1.13367e-11, -1.45519e-11, -2.55795e-12, 1, 2.91038e-11, 0, 2.91038e-11, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_yojg5")

[node name="Character" type="MeshInstance3D" parent="Player/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.84161, 0)
material_override = SubResource("StandardMaterial3D_w2jwh")
material_overlay = SubResource("ShaderMaterial_xw123")
mesh = ExtResource("2_wp22y")
skeleton = NodePath("../../..")

[node name="GPUParticlesCollisionHeightField3D" type="GPUParticlesCollisionHeightField3D" parent="Player/CollisionShape3D"]
transform = Transform3D(1, -1.00151e-11, -3.98722e-09, -2.56506e-12, 1, 7.97445e-09, 0, 7.97445e-09, 1, -0.165773, 0.256165, -0.0701284)
size = Vector3(3.59033, 4.71057, 3.08826)
resolution = 1

[node name="Rocket" type="StaticBody3D" parent="."]
transform = Transform3D(0.72, 0, 0, 0, 0.72, 0.000213628, 0, -0.000213628, 0.72, 4.29631, 5.21398, -21.7303)
rotation_edit_mode = 1
script = ExtResource("4_44uwe")

[node name="Mesh" type="MeshInstance3D" parent="Rocket"]
transform = Transform3D(1, 6.97574e-16, -3.04919e-23, 0, -4.37114e-08, -1, -6.97574e-16, 1, -4.37114e-08, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_43kb8")
mesh = ExtResource("6_7fv1l")
skeleton = NodePath("../..")

[node name="Shape" type="CollisionShape3D" parent="Rocket"]
transform = Transform3D(0.762973, -5.08463e-31, 2.22256e-38, 0, -3.33506e-08, -0.762973, 5.08463e-31, 0.762973, -3.33506e-08, 0, -0.002, 1.426)
shape = SubResource("BoxShape3D_lpa56")

[node name="GPUParticles3D" type="GPUParticles3D" parent="Rocket"]
transform = Transform3D(0.0312631, 1.07954e-05, 2.59951e-05, -1.08698e-05, 0.0312631, 9.0098e-05, -2.59641e-05, -9.0107e-05, 0.0312631, 0, 0, 0)
amount = 900
lifetime = 0.46
collision_base_size = 0.0
local_coords = true
trail_lifetime = 0.71
process_material = SubResource("ParticleProcessMaterial_bqfjj")
draw_pass_1 = SubResource("BoxMesh_5ovii")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 11.0286, 0)
light_color = Color(0.87451, 0.556863, 0.172549, 1)
light_energy = 2.836
light_indirect_energy = 16.0
light_volumetric_fog_energy = 0.0

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
mesh = SubResource("QuadMesh_1sw3d")
surface_material_override/0 = SubResource("ShaderMaterial_1qs0j")

[node name="Explosion" type="GPUParticles3D" parent="."]
transform = Transform3D(-0.150796, 0, 0, 0, 0.156349, 0, 0, 0, 0.156349, 6.95162, 3.83604, 0)
amount = 500
lifetime = 1.01
explosiveness = 1.0
randomness = 1.0
collision_base_size = 0.4
visibility_aabb = AABB(-72.1809, -41.6248, -76.624, 144.362, 83.2496, 153.248)
trail_lifetime = 0.21
process_material = SubResource("ParticleProcessMaterial_tr8k3")
draw_pass_1 = SubResource("BoxMesh_vefb4")
script = ExtResource("8_6o8lh")

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.29832, -1.42723, -2.65542)
snap = 1e-06
use_collision = true
collision_layer = 7
collision_mask = 7
size = Vector3(17.9645, 1, 18.0516)

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.31671, 9.19545, -3.85453)
visible = false
amount = 23
lifetime = 1.51
collision_base_size = 0.8
visibility_aabb = AABB(-3.38179, -5.33563, -2.5661, 5.68374, 2.91247, 4.8031)
process_material = SubResource("ParticleProcessMaterial_1bmth")
draw_pass_1 = SubResource("BoxMesh_ju2jw")

[node name="GPUParticlesCollisionBox3D" type="GPUParticlesCollisionBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.30514, -1.4381, -2.62774)
size = Vector3(17.9326, 0.996078, 18.1249)

[connection signal="finished" from="Explosion" to="Explosion" method="_on_finished"]
